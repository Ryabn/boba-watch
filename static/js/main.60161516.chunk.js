(window["webpackJsonpboba-watch"]=window["webpackJsonpboba-watch"]||[]).push([[0],{110:function(e,t,a){},111:function(e,t,a){},143:function(e,t,a){e.exports=a(217)},148:function(e,t,a){},160:function(e,t,a){},162:function(e,t,a){},164:function(e,t,a){},214:function(e,t,a){},215:function(e,t,a){},216:function(e,t,a){},217:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),i=a.n(o),c=(a(148),a(48)),l=a(267),s=a(56),d=a(14),u=a(15),m=a(17),p=a(16),h=a(18),g=a(50),f=a(259),v=a(256),b=a(24);var y={toMoney:function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?parseInt(e/100):Number(e/100).toFixed(2)}},E=(a(160),a(82),["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]),S=["1 AM","2 AM","3 AM","4 AM","5 AM","6 AM","7 AM","8 AM","9 AM","10 AM","11 AM","12 AM","1 PM","2 PM","3 PM","4 PM","5 PM","6 PM","7 PM","8 PM","9 PM","10 PM","11 PM","12 PM"],k=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={time:e.data,width:e.width},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"parseTimeData",value:function(e){var t=[],a=[];e.forEach((function(e){a.push(Math.max.apply(null,e))}));var n=Math.max.apply(null,a);return e.forEach((function(e,a){e.forEach((function(e,r){t.push({x:E[a],y:S[r],color:"rgba(246, 128, 128, ".concat(0===e?.1:e/n,")")})}))})),t}},{key:"render",value:function(){var e=this.props.width;return r.a.createElement(v.a,{className:"daily-chart"},r.a.createElement(b.h,{xType:"ordinal",yType:"ordinal",margin:60,width:e,height:1.8*e},r.a.createElement(b.g,{orientation:"top"}),r.a.createElement(b.i,null),r.a.createElement(b.b,{colorType:"literal",style:{stroke:"white",strokeWidth:"0px",rectStyle:{rx:0,ry:0}},data:this.parseTimeData(this.props.data)})))}}]),t}(n.Component),w=(a(162),["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]),F=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).parse=function(e){var t={morn:[],noon:[]};return e.forEach((function(e,a){var n=0,r=0;e.forEach((function(e,t){t>=11?r+=e:n+=e})),t.morn.push({x:w[a],y:n}),t.noon.push({x:w[a],y:r})})),t},a.state=a.parse(a.props.data),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state;return r.a.createElement(v.a,{className:"time-bar-graph--holder"},r.a.createElement(b.h,{width:this.props.width-40,height:300,stackBy:"y",xType:"ordinal"},r.a.createElement(b.f,null),r.a.createElement(b.c,null),r.a.createElement(b.g,null),r.a.createElement(b.i,{title:"# of purchases"}),r.a.createElement(b.e,{color:"#FFACAC",data:e.morn}),r.a.createElement(b.e,{color:"#FFDCDC",data:e.noon})),r.a.createElement(b.a,{style:{textAlign:"center"},orientation:"horizontal",items:[{title:"Morning Purchases",color:"#FFACAC",strokeWidth:"5px"},{title:"Afternoon Purchases",color:"#FFDCDC",strokeWidth:"5px"}]}))}}]),t}(n.Component),O=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).getState=function(){var e=JSON.parse(localStorage.getItem("metrics")),t=JSON.parse(localStorage.getItem("completeMetrics")),a=localStorage.getItem("userDrinkMax");return{drinkPercentage:parseInt(e.td/a*100),userDrinkMax:a,userSpendMax:localStorage.getItem("userSpendMax"),sunburstData:{size:0,color:"#FFFFFF",children:[{title:"Progress",size:e.tc,color:"#32de44",children:[{title:"Padding",size:0,color:"#FFFFFF"}]},{title:"Until Limit",size:localStorage.getItem("userSpendMax")-e.tc,color:"#F4F4F4"}]},metrics:e,cmetrics:t,screenWidth:window.innerWidth-40}},a.update=function(){a.setState(a.getState())},a.componentDidMount=function(){window.addEventListener("resize",(function(){a.setState({screenWidth:window.innerWidth-40})}))},a.isLandscape=function(){return window.innerWidth/window.innerHeight>1.625&&window.innerHeight>700&&window.innerWidth>1200},a.state=a.getState(),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.screenWidth,a=this.isLandscape()?.9*window.innerHeight:t;return r.a.createElement("div",{className:"dashboard-page"},r.a.createElement(f.a,{variant:"h4",className:"dashboard-page--title"},"Monthly Spending"),r.a.createElement(v.a,{id:"chart-holder"},r.a.createElement("div",{className:"chart-holder-description"},"MONTHLY LIMIT: $",y.toMoney(e.userSpendMax,e.userSpendMax/1e4>1),r.a.createElement("br",null),r.a.createElement("span",null,"$",y.toMoney(e.metrics.tc,e.metrics.tc/1e4>1)),r.a.createElement("br",null),"REMAINING: $",y.toMoney(e.userSpendMax-e.metrics.tc)),r.a.createElement(b.d,{height:a-(this.isLandscape()?105:45),width:a-45,data:e.sunburstData,padAngle:.06,animation:!0,colorType:"literal"})),r.a.createElement(v.a,{className:"month-total-money"},r.a.createElement("p",null,"This is how much you\u2019ve spent on drinks so far:"),r.a.createElement(f.a,{variant:"h2"},"$",y.toMoney(e.cmetrics.tc,e.cmetrics.tc/1e4>1))),r.a.createElement(v.a,{className:"month-drink-limit",style:{backgroundPositionY:2.7*(100-e.drinkPercentage)}},r.a.createElement(f.a,{variant:"h3"},e.drinkPercentage,"%"),r.a.createElement("p",null,"to your max number of drinks this month")),r.a.createElement(v.a,{className:"month-total-drinks"},r.a.createElement(f.a,{variant:"h2"},e.metrics.td),r.a.createElement("p",null,"drinks this month")),r.a.createElement(k,{data:e.cmetrics.d,width:this.isLandscape()?t/4+20:t}),this.isLandscape()?" ":r.a.createElement(F,{width:t,data:e.cmetrics.d}))}}]),t}(n.Component),N=a(25),M=a.n(N),I=(a(164),a(223)),D=a(260),j=a(268),x=a(262),C=a(125),P=a(89),A=a(58),L=a.n(A);function W(){for(var e={td:0,tc:0,ad:0,d:Array(7)},t=0;t<7;t++)e.d[t]=Array(24).fill(0);return e}function J(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t.td+=a?1:-1,t.tc+=a?parseFloat(e.price):-1*parseFloat(e.price),t.ad=parseFloat(t.tc)/parseFloat(t.td);var n=new Date(e.date);t.d[n.getDay()][n.getHours()-1]+=a?1:-1}var T,z,B={getDefaultMetrics:W,recalculateMetrics:function(e){var t=W(),a=W(),n=new Date,r=n.getMonth(),o=n.getFullYear();return e.forEach((function(e){var n=new Date(e.date);n.getMonth()===r&&n.getFullYear()===o&&J(e,t),J(e,a)})),localStorage.setItem("metrics",JSON.stringify(t)),localStorage.setItem("completeMetrics",JSON.stringify(a)),t},updateMetrics:J,addDrink:function(e,t){var a=JSON.parse(localStorage.getItem("metrics")),n=JSON.parse(localStorage.getItem("completeMetrics")),r=JSON.parse(localStorage.getItem("drinkids"));e.drink.id=t,r.length?function e(t,a,n,r,o){if(o<=r)return n.splice(a<new Date(JSON.parse(localStorage.getItem(n[r])).date)?r+1:r,0,t);var i=parseInt((o-r)/2+r),c=new Date(JSON.parse(localStorage.getItem(n[i])).date);return a.getTime()===c.getTime()?n.splice(i+1,0,t):a<c?e(t,a,n,i+1,o):e(t,a,n,r,i-1)}(t,new Date(e.drink.date),r,0,r.length-1):r.push(t),J(e.drink,a),J(e.drink,n),localStorage.setItem(t,JSON.stringify(e.drink)),localStorage.setItem("metrics",JSON.stringify(a)),localStorage.setItem("completeMetrics",JSON.stringify(n)),localStorage.setItem("drinkids",JSON.stringify(r))},deleteDrink:function(e){var t=JSON.parse(localStorage.getItem("metrics")),a=JSON.parse(localStorage.getItem("completeMetrics")),n=JSON.parse(localStorage.getItem("drinkids")),r=JSON.parse(localStorage.getItem(e)),o=new Date,i=o.getMonth(),c=o.getFullYear(),l=new Date(r.date);l.getMonth()===i&&l.getFullYear()===c&&J(r,t,!1),J(r,a,!1);var s=n.indexOf(e);s>-1&&n.splice(s,1),localStorage.removeItem(e),localStorage.setItem("metrics",JSON.stringify(t)),localStorage.setItem("completeMetrics",JSON.stringify(a)),localStorage.setItem("drinkids",JSON.stringify(n))}},R=a(43);a(167),a(169);function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function $(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var H=function(){},Y={init:function(){return{drinks:[],drinkids:[]}},each:function(e){return localStorage.setItem(e.id,JSON.stringify($({},e.data().drink,{id:e.id}))),[{key:"drinks",value:$({},e.data().drink,{id:e.id})},{key:"drinkids",value:e.id}]},end:function(e){localStorage.setItem("drinkids",JSON.stringify(e.drinkids)),B.recalculateMetrics(e.drinks)}},G=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H;T.collection("users").doc(localStorage.getItem("uid")).collection("user").doc("stats").set(e).then((function(e){t(e)})).catch((function(e){M()("Error!","".concat(e),"error"),t(e)}))},Q={init:function(){(T=R.firestore()).enablePersistence(),z=new R.auth.FacebookAuthProvider},login:{isLoggedIn:function(e){R.auth().onAuthStateChanged((function(t){e(!!t)}))},attempt:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H;R.auth().signInWithRedirect(z).then((function(t){e(t)})).catch((function(e){M()("Error!","Login Unsuccessful: ".concat(e),"error")}))},check:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H;R.auth().getRedirectResult().then((function(a){a.credential?e(a):t()})).catch((function(e){t()}))}},logout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H;R.auth().signOut().then((function(){e()})).catch((function(e){M()("Error!","Logout Unsuccessful: ".concat(e),"error")}))},user:{setup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t={budget:1e4,limit:15,public:!1};T.collection("users").doc(localStorage.getItem("uid")).collection("user").doc("profile").set(t).then((function(a){localStorage.setItem("userSpendMax",t.budget),localStorage.setItem("userDrinkMax",t.limit),localStorage.setItem("userPublic",t.public),e(a)})).catch((function(e){M()("Error!","Error setting up your account: ".concat(e),"error")}))},get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H;T.collection("users").doc(localStorage.getItem("uid")).collection("user").doc("profile").get().then((function(t){var a=t.data();localStorage.setItem("userSpendMax",parseInt(a.budget)),localStorage.setItem("userDrinkMax",parseInt(a.limit)),localStorage.setItem("userPublic",a.public),e(t)})).catch((function(e){M()("Error!","".concat(e),"error")}))},update:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H,a={public:e.userPublic,budget:100*parseFloat(e.userSpendMax),limit:parseInt(e.userDrinkMax)};isNaN(a.budget)||isNaN(a.limit)?M()("Error!","Please enter valid numbers","error"):T.collection("users").doc(localStorage.getItem("uid")).collection("user").doc("profile").set(a).then((function(e){localStorage.setItem("userSpendMax",parseInt(a.budget)),localStorage.setItem("userDrinkMax",parseInt(a.limit)),localStorage.setItem("userPublic",a.public),M()("Success!","Your settings have been updated","success").then((function(a){t(a,e)}))})).catch((function(e){M()("Error!","".concat(e),"error")}))},updateStats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=JSON.parse(localStorage.getItem("metrics")),a=JSON.parse(localStorage.getItem("completeMetrics"));delete t.d,t.ctd=a.td,t.ctc=a.tc,t.cad=a.ad,t.d=JSON.stringify(a.d),t.fn=localStorage.getItem("fname"),G(t,e)}},drinks:{get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y,a=t.init();T.collection("users/".concat(localStorage.getItem("uid"),"/drinks")).orderBy("drink.date","desc").get().then((function(n){n.forEach((function(e){t.each(e).forEach((function(e){a[e.key].push(e.value)}))})),t.end(a),e()}))},add:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H;T.collection("users/".concat(localStorage.getItem("uid"),"/drinks")).add(e).then((function(e){M()("Done!","Drink has been added","success"),t(e)})).catch((function(e){M()("Error!","".concat(e),"error")}))},delete:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H;T.collection("users/".concat(localStorage.getItem("uid"),"/drinks")).doc(e).delete().then((function(e){M()("Done!","Drink has been deleted","success"),t()})).catch((function(e){console.log(e),M()("Error!","Couldn't delete your drink. Try again later!","error")}))}}},V=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={selectedDate:new Date},a.handleDateChange=function(e){a.setState({selectedDate:e})},a.update=function(e){document.getElementById("add-drink--button").disabled=!1,e.get().then((function(e){a.addLocally(e.data(),e.id)}))},a.addLocally=function(e,t){B.addDrink(e,t),Q.user.updateStats(),a.props.close(),a.setState({selectedDate:new Date})},a.addDrink=function(){document.getElementById("add-drink--button").disabled=!0;var e={drink:{name:document.getElementById("name-value").value,location:document.getElementById("location-value").value,price:parseInt(100*parseFloat(document.getElementById("price-value").value)),date:new Date(document.getElementById("date-value").value).toISOString(),description:document.getElementById("description-value").value}};if(isNaN(e.drink.price))return M()("Error!","Please enter a valid price to add drink","error"),void(document.getElementById("add-drink--button").disabled=!1);Q.drinks.add(e,a.update)},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(I.a,{open:this.props.open},r.a.createElement("div",{className:"add-modal"},r.a.createElement(D.a,{color:"secondary",className:"close-button",onClick:this.props.close},r.a.createElement(L.a,{color:"secondary",style:{fontSize:14}})),r.a.createElement(f.a,{variant:"h5",style:{textAlign:"center"}},"Add a purchase"),r.a.createElement(j.a,{id:"location-value",className:"add-input",label:"Location",inputProps:{maxLength:250}}),r.a.createElement(j.a,{id:"name-value",className:"add-input",margin:"dense",label:"Drink name",inputProps:{maxLength:80}}),r.a.createElement(j.a,{id:"price-value",className:"add-input",margin:"dense",label:"Price",inputProps:{maxLength:30},type:"number",pattern:"^-?[0-9]\\d*\\.?\\d*$"}),r.a.createElement(P.b,{utils:C.a},r.a.createElement(P.a,{id:"date-value",className:"add-input",margin:"dense",format:"M/d/yyyy h:mm a",label:"Date",value:this.state.selectedDate,onChange:this.handleDateChange,inputProps:{maxLength:100}})),r.a.createElement(j.a,{id:"description-value",className:"add-input",label:"Description",inputProps:{maxLength:1e3}}),r.a.createElement("div",{className:"add-button-holder"},r.a.createElement(x.a,{id:"add-drink--button",onClick:this.addDrink,className:"add-button"},"ADD"))))}}]),t}(n.Component),X=Object(g.f)(V),_=a(270),q=a(264),K=a(119),Z=a.n(K),ee=a(117),te=a(269),ae=a(118),ne=a.n(ae),re=(a(214),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={copiedNotification:!1},a.closeSnackbar=function(){a.setState({copiedNotification:!1})},a.copy=function(){navigator.share?navigator.share({title:"My Boba Watch Profile",text:"Check out my boba spending!",url:a.props.text}).catch((function(e){a.setState({copiedNotification:!0})})):a.setState({copiedNotification:!0})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"clipboard"},r.a.createElement("div",{className:"clipboard-text",id:"copy-me"},this.props.text),r.a.createElement(ee.CopyToClipboard,{text:this.props.text},r.a.createElement(D.a,{style:{padding:0},className:"clipboard-icon",onClick:this.copy},r.a.createElement(ne.a,{style:{fontSize:14}}))),r.a.createElement(te.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:this.state.copiedNotification,autoHideDuration:4e3,onClose:this.closeSnackbar,message:r.a.createElement("span",null,"Link Copied!")}))}}]),t}(n.Component)),oe=(a(215),{color:"#FF0000",border:"1px solid red",boxShadow:"none",backgroundColor:"#FFFFFF"}),ie=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).defaultState=function(){return{userSpendMax:localStorage.getItem("userSpendMax")/100,userDrinkMax:localStorage.getItem("userDrinkMax"),userPublic:"true"===localStorage.getItem("userPublic")}},a.state=a.defaultState(),a.logout=function(){Q.logout((function(){localStorage.clear(),window.location=window.location.origin}))},a.handleChange=function(e){return function(t){a.setState(Object(s.a)({},e,t.target.value))}},a.handleToggle=function(){a.setState((function(e){return{userPublic:!e.userPublic}}),(function(){Q.user.update(a.state,a.close)}))},a.close=function(){a.props.close(),a.setState(a.defaultState())},a.getHelp=function(){window.open("https://info.boba.watch/")},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state;return r.a.createElement(I.a,{open:this.props.open},r.a.createElement("div",{className:"user-modal",style:{height:t.userPublic?385:350}},r.a.createElement(D.a,{color:"secondary",className:"modal-small--button close-button",onClick:function(){e.close()}},r.a.createElement(L.a,{color:"secondary",style:{fontSize:14}})),r.a.createElement(D.a,{className:"modal-small--button help-button",onClick:function(){e.getHelp()}},r.a.createElement(Z.a,{color:"secondary",style:{fontSize:14}})),r.a.createElement("img",{src:localStorage.getItem("avatar"),className:"user-avatar",alt:"user"}),r.a.createElement(f.a,{variant:"h5",style:{textAlign:"center"}},"User settings"),r.a.createElement(j.a,{id:"monthly-spending-input",type:"tel",pattern:"^-?[0-9]\\d*\\.?\\d*$",className:"user-input",variant:"outlined",margin:"normal",onChange:this.handleChange("userSpendMax"),value:t.userSpendMax,label:"Monthly Spending Limit"}),r.a.createElement(j.a,{id:"monthly-drinking-limit",type:"tel",pattern:"^-?[0-9]\\d*\\.?\\d*$",className:"user-input",margin:"dense",variant:"outlined",onChange:this.handleChange("userDrinkMax"),value:t.userDrinkMax,label:"Max of drinks / month"}),r.a.createElement("div",{className:"user-share-profile"},"Share Profile:",r.a.createElement(_.a,{checked:t.userPublic,onClick:this.handleToggle,label:"Share Profile",color:"primary"})),r.a.createElement(q.a,{in:t.userPublic},r.a.createElement(re,{text:"https://share.boba.watch/#/".concat(localStorage.getItem("uid"))})),r.a.createElement("div",{className:"update-button-holder"},r.a.createElement(x.a,{className:"logout-button",variant:"text",onClick:this.logout,style:oe},"LOGOUT"),r.a.createElement(x.a,{className:"update-button",onClick:function(){Q.user.update(t,e.close)}},"UPDATE"))))}}]),t}(n.Component),ce=a(121),le=a.n(ce),se=a(120),de=a.n(se),ue=(a(110),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={open:!1,add:!1},a.toggle=function(){a.setState((function(e){return{open:!e.open}}))},a.toggleAdd=function(){a.setState((function(e){return{add:!e.add}}))},a.hasImage=function(){if(null!==a.props.data.photo&&""!==a.props.data.photo.trim())return r.a.createElement("img",{alt:"drink",src:a.props.data.photo})},a.delete=function(){Q.drinks.delete(a.props.data.id,a.removeLocally)},a.removeLocally=function(){B.deleteDrink(a.props.data.id),a.props.update(),Q.user.updateStats()},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=new Date(this.props.data.date);return r.a.createElement("div",{className:"thaman-color"},r.a.createElement("div",{className:"history-drink-label",onClick:this.toggle},r.a.createElement("p",{className:"drink-place"},this.props.data.location),r.a.createElement("p",{className:"drink-price"},"$",y.toMoney(this.props.data.price)),r.a.createElement("div",{className:"expand-icon"},this.state.open?r.a.createElement(de.a,null):r.a.createElement(le.a,null)),r.a.createElement("p",{className:"drink-name"},this.props.data.name),r.a.createElement("p",{className:"drink-time"},new Date(this.props.data.date).toDateString().substr(4))),r.a.createElement(q.a,{in:this.state.open,className:"drink-collapse"},r.a.createElement("p",{className:"drink-label"},this.props.data.name,r.a.createElement("br",null),r.a.createElement("span",null,"@",this.props.data.location)),r.a.createElement("p",{className:"drink-description"},this.props.data.description),r.a.createElement("p",{className:"drink-date"},r.a.createElement("span",null,"on")," ",e.toDateString()),r.a.createElement("div",{className:"drink-options"},r.a.createElement(x.a,{onClick:this.delete},"DELETE"))))}}]),t}(n.Component)),me=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={monthly:{drinks:[r.a.createElement("div",{className:"thaman-color"},r.a.createElement(f.a,{variant:"h3",key:1},"No drinks this month :("))],sum:0},complete:{drinks:[r.a.createElement("div",{className:"thaman-color"},r.a.createElement(f.a,{variant:"h3",key:1},"Add a drink to start!"))],sum:0},monthlyDisplay:7,completeDisplay:5},a.update=function(){var e=JSON.parse(localStorage.getItem("drinkids"));if(Array.isArray(e)&&e.length){e=e.map((function(e){return JSON.parse(localStorage.getItem(e))}));var t=[],n=[],o=0,i=0,c=new Date,l=c.getMonth(),s=c.getFullYear(),d=a.state.monthlyDisplay,u=a.state.completeDisplay;e.forEach((function(e,c){var m=new Date(e.date);m.getMonth()===l&&m.getFullYear()===s?(d>0&&(t.push(r.a.createElement(ue,{key:e.id,data:e,update:a.update})),d-=1),o+=parseFloat(e.price)):u>0&&(n.push(r.a.createElement(ue,{key:e.id,data:e,update:a.update})),u-=1),i+=parseFloat(e.price)})),d<=0&&t.push(r.a.createElement("div",{className:"thaman-color"},r.a.createElement("div",{className:"history-load-more",onClick:a.displayMoreMonthly},"\u2022 \u2022 \u2022"))),u<=0&&n.push(r.a.createElement("div",{className:"thaman-color"},r.a.createElement("div",{className:"history-load-more",onClick:a.displayMoreOverall},"\u2022 \u2022 \u2022"))),a.setState({monthly:{drinks:t,sum:o},complete:{drinks:n,sum:i}})}},a.displayMoreMonthly=function(){a.setState((function(e){return{monthlyDisplay:e.monthlyDisplay+8}}),a.update)},a.displayMoreOverall=function(){a.setState((function(e){return{completeDisplay:e.completeDisplay+8}}),a.update)},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.update()}},{key:"render",value:function(){return r.a.createElement("div",{className:"history-page"},r.a.createElement(f.a,{variant:"h3"}," Monthly Spending"),r.a.createElement("div",{className:"history-spending"},this.state.monthly.drinks),r.a.createElement(f.a,{variant:"h3",className:"history-total"},r.a.createElement("span",null,"Monthly Total:")," $",y.toMoney(this.state.monthly.sum)),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(f.a,{variant:"h3"}," Overall Spending"),r.a.createElement("div",{className:"history-spending"},this.state.complete.drinks),r.a.createElement(f.a,{variant:"h3",className:"history-total"},r.a.createElement("span",null,"Complete Total:")," $",y.toMoney(this.state.complete.sum)))}}]),t}(n.Component),pe=(a(216),function(){return window.innerHeight/window.innerWidth<1.2}),he=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={ar:pe()},a.componentDidMount=function(){window.addEventListener("resize",(function(){return a.setState({ar:pe()})}))},a.handleClose=function(){a.setState({ar:!1})},a.loggedIn=function(e){a.props.successfulLogin(e)},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"login-page"},r.a.createElement("div",{className:"login-logo"}),r.a.createElement(f.a,{variant:"h1"},"boba watch"),r.a.createElement(te.a,{open:this.state.ar,message:["Looks like you're using a desktop / landscape mode. Although we're working hard on designing an intuitive desktop mode, there isn't one at the moment. For the best experience, download our progressive web app on your phone! Find more info here: ",r.a.createElement("a",{key:"help-link",href:"https://info.boba.watch/",rel:"noopener noreferrer",target:"_blank",style:{color:"#FFDCDC"}},"https://info.boba.watch/")],action:r.a.createElement(D.a,{key:"close","aria-label":"Close",style:{position:"fixed",top:0,right:0,color:"#FFFFFF"},onClick:this.handleClose},r.a.createElement(L.a,null))}),r.a.createElement("button",{className:"fb-button",onClick:function(){return Q.login.attempt(e.loggedIn)}}," Log in with Facebook "))}}]),t}(n.Component),ge=Object(g.f)(he),fe=a(265),ve=a(266),be=a(122),ye=a.n(be),Ee=a(123),Se=a.n(Ee),ke=a(124),we=a.n(ke),Fe=(a(111),function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(fe.a,{value:this.props.value,onChange:this.props.handleChange,className:"bottom-nav"},r.a.createElement(ve.a,{label:"Dashboard",value:"dash",component:c.b,to:"/dash",icon:r.a.createElement(ye.a,null)}),r.a.createElement(ve.a,{value:"add",disableRipple:!0,onClick:this.props.toggleAdd,onClose:this.refocus,icon:r.a.createElement("div",{className:"center-fab"},r.a.createElement(Se.a,{style:{fontSize:50}}))}),r.a.createElement(ve.a,{label:"Spending",value:"history",component:c.b,to:"/history",icon:r.a.createElement(we.a,null)}))}}]),t}(n.Component)),Oe=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={add:!1,user:!1,value:""},a.toggle=function(e){a.setState((function(t){return Object(s.a)({},e,!t[e])})),a.update.current.update()},a.handleChange=function(e,t){a.setState({value:t})},a.loading=function(){var e=document.createElement("div");return e.className="loading-background",e.insertAdjacentHTML("beforeend",'<div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>'),document.body.appendChild(e),e},a.finishLoad=function(){document.body.removeChild(a.load)},a.successfulLogin=function(e){localStorage.clear(),localStorage.setItem("avatar",e.additionalUserInfo.profile.picture.data.url),localStorage.setItem("fname",e.additionalUserInfo.profile.first_name),localStorage.setItem("uid",e.user.uid),e.additionalUserInfo.isNewUser?Q.user.setup(a.getDrinksAndRedirect):Q.user.get(a.getDrinksAndRedirect)},a.getDrinksAndRedirect=function(){Q.drinks.get((function(){a.redirect()}))},a.redirect=function(){a.props.history.push("dash"),a.finishLoad()},a.componentDidCatch=function(){localStorage.clear(),window.location=window.location.origin},Q.init(),a.load=a.loading(),Q.login.isLoggedIn((function(t){t&&localStorage.getItem("uid")?a.redirect(t):Q.login.check(a.successfulLogin,(function(){e.history.push("/"),a.finishLoad()}))})),a.update=r.a.createRef(),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state;return r.a.createElement(g.c,null,r.a.createElement(g.a,{exact:!0,strict:!0,path:"/",render:function(){return r.a.createElement(ge,{successfulLogin:e.successfulLogin})}}),r.a.createElement(g.a,{strict:!0,path:"/:page",render:function(){return r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"page"},r.a.createElement("img",{src:localStorage.getItem("avatar"),alt:"user-settings",className:"avatar-button",onClick:function(){return e.toggle("user")}}),r.a.createElement(g.a,{exact:!0,path:"/dash",render:function(){return r.a.createElement(O,{ref:e.update})}}),r.a.createElement(g.a,{exact:!0,path:"/history",render:function(){return r.a.createElement(me,{ref:e.update})}})),r.a.createElement(X,{open:t.add,close:function(){return e.toggle("add")}}),r.a.createElement(ie,{open:t.user,close:function(){return e.toggle("user")}}),r.a.createElement(Fe,{value:t.value,handleChange:e.handleChange,toggleAdd:function(){return e.toggle("add")}}))}}),r.a.createElement(g.a,{render:function(){return r.a.createElement(ge,{successfulLogin:e.successfulLogin})}}))}}]),t}(n.Component),Ne=Object(g.f)(Oe),Me=a(126),Ie=Object(Me.a)({overrides:{MuiButton:{text:{backgroundColor:"#F68080",borderRadius:3,border:0,color:"white",height:30,padding:"0 30px",margin:"20px",boxShadow:"0 3px 5px 2px rgba(255, 105, 135, 0.3)",fontFamily:"Poppins",fontWeight:700,fontSize:14,"&:hover":{backgroundColor:"#FFDCDC"}}},MuiBottomNavigation:{root:{backgroundColor:"#FFAFA4"}},MuiBottomNavigationAction:{root:{color:"#000000"},iconOnly:{color:"#FF0000"},wrapper:{color:"#FFFFFF "}},MuiDialogActions:{action:{color:"#FFFFFF"}}},palette:{primary:{main:"#F68080",light:"#FFDCDC",contrastText:"#FFFFFF"},secondary:{main:"#FFFFFF",contrastText:"#F68080"}},typography:{useNextVariants:!0,h1:{fontFamily:"Poppins",fontWeight:700,color:"#FFFFFF",fontSize:44,marginBottom:20},h2:{fontFamily:"Poppins",fontWeight:700,color:"#FFFFFF",fontSize:48,margin:0},h3:{fontFamily:"Poppins",fontWeight:700,color:"#F68080",fontSize:24,marginBottom:"16px"},h4:{fontFamily:"Poppins",fontWeight:700,color:"#FFFFFF",fontSize:24},h5:{fontFamily:"Poppins",fontWeight:700,color:"#000000",fontSize:18},h6:{fontFamily:"Poppins",color:"#F68080",fontSize:12}}}),De=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function je(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}window.isUpdateAvailable=new Promise((function(e,t){"serviceWorker"in navigator&&navigator.serviceWorker.register("service-worker.js").then((function(t){t.onupdatefound=function(){var a=t.installing;a.onstatechange=function(){switch(a.state){case"installed":navigator.serviceWorker.controller?e(!0):e(!1)}}}})).catch((function(e){return console.error("[SW ERROR]",e)}))}));R.initializeApp({apiKey:"AIzaSyBePNJQYVteyh1Ll9fqnXbXc-S8fmJlbTQ",authDomain:"boba-watch-firebase.firebaseapp.com",databaseURL:"https://boba-watch-firebase.firebaseio.com",projectId:"boba-watch-firebase",storageBucket:"",messagingSenderId:"674375234614",appId:"1:674375234614:web:fdaf98c291204b9c"}),i.a.render(r.a.createElement(l.a,{theme:Ie},r.a.createElement(c.a,{basename:""},r.a.createElement(Ne,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");De?(!function(e,t){fetch(e).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):je(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):je(t,e)}))}}()}},[[143,1,2]]]);
//# sourceMappingURL=main.60161516.chunk.js.map